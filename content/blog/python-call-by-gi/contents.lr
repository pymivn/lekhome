title: Python call by g√¨?
---
_slug: call-by
---
author: HVN
---
body:

M·ªôt c√¢u h·ªèi nh·∫°t to·∫πt c·ªßa nh√† ph·ªèng v·∫•n c√≥ th·ªÉ ƒë∆∞a ra (v·ªõi ng∆∞·ªùi ph·ªèng v·∫•n th∆∞·ªùng c√≥ ki·∫øn
th·ª©c t·ª´ ng√¥n ng·ªØ kh√°c nh∆∞ Java, PHP hay C++, ho·∫∑c m·ªôt chuy√™n gia Python th·ª±c s·ª± v√† h·ªèi ƒë·ªÉ
check xem b·∫°n c√≥ m·∫Øc b·∫´y kh√¥ng - lo·∫°i n√†y th√¨ hi·∫øm, v√† kh√¥ng r·∫£nh üôÑ).

## Python d√πng call-by-value hay call-by-reference?
Hai kh√°i ni·ªám n√†y th·ª±c ra kh√¥ng t·ªìn t·∫°i trong Python, b·∫°n c√≥ th·ªÉ ƒë√†o tung c·∫£ trang document c·ªßa Python c≈©ng
s·∫Ω kh√¥ng th·∫•y n√≥i g√¨ v·ªÅ kh√°i ni·ªám n√†y. T·ª©c l√†: n√≥ kh√¥ng c√≥ th·∫≠t! N√≥ kh√¥ng c·∫ßn thi·∫øt! b·∫°n ch·ªâ c·∫ßn hi·ªÉu function
 ho·∫°t ƒë·ªông th·∫ø n√†o, c√°ch Python s·ª≠ d·ª•ng "name binding". C√≤n kh√¥ng n√™n ng·ªìi c√£i nhau v·ªÅ "call-by-reference",
"call-by-value" l√†m g√¨ cho t·ªën th·ªùi gian, v√¥ t√°c d·ª•ng.

- https://docs.python.org/3/search.html?q=by+reference
- https://docs.python.org/3/search.html?q=by+value

## Call by XYZ l√† c√°i g√¨?
M·ªçi kh√°i ni·ªám vi·∫øt sau ƒë√¢y kh√¥ng t·ªìn t·∫°i trong Python, c√°c thu·∫≠t ng·ªØ ƒë∆∞·ª£c vi·∫øt v·ªõi "t·ª´ v·ª±ng" c·ªßa ng√¥n ng·ªØ l·∫≠p tr√¨nh kh√°c.

Trong m·ªôt s·ªë ng√¥n ng·ªØ nh∆∞ C, C++, khi g·ªçi function ta c√≥ truy·ªÅn v√†o c√°c "tham s·ªë" (pass argument),
n·∫øu function ƒë√≥ nh·∫≠n v√†o m·ªôt array (trong Python hi·ªÉu n√¥m na l√† list), th√¨ trong function,
ta s·∫Ω x·ª≠ l√Ω ch√≠nh array ƒë√≥ hay m·ªôt b·∫£n copy c·ªßa n√≥?

Ki·ªÉu 1
```C
update(danh_sach)
```

Ki·ªÉu 2
```C
update(&danh_sach)
```

V·ªõi c√¢u g·ªçi function (call function) th·ª© nh·∫•t ta g·ªçi function v·ªõi gi√° tr·ªã (value) c·ªßa bi·∫øn `danh_sach`.
M·ªçi thay ƒë·ªïi trong function th·ª±c hi·ªán tr√™n argument ƒë∆∞·ª£c g·ªçi l√† th·ª±c hi·ªán tr√™n b·∫£n copy c·ªßa `danh_sach`.

C√¢u g·ªçi function th·ª© hai ta g·ªçi function v·ªõi con tr·ªè (pointer) ƒë·∫øn bi·∫øn `danh_sach` hay c√≤n g·ªçi l√† reference. M·ªçi thay
ƒë·ªïi s·∫Ω thay ƒë·ªïi tr·ª±c ti·∫øp tr√™n `danh_sach`.

Nh·ªØng ng√¥n ng·ªØ l·∫≠p tr√¨nh b·ªã ·∫£nh h∆∞·ªüng b·ªüi C th∆∞·ªùng c·∫Øt gi·∫£m kh√°i ni·ªám "pointer" ƒë·ªÉ tr√°nh g√¢y ph·ª©c t·∫°p, v√¨ v·∫≠y
khi g·ªçi function s·∫Ω m·∫∑c ƒë·ªãnh d√πng 1 trong 2 ki·ªÉu tr√™n. Ho·∫∑c d√πng m·ªôt c∆° ch·∫ø kh√°c ho√†n to√†n.

V√≠ d·ª•:
- [Java call/pass by value](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)
- [PHP call/pass by g√¨ ƒë√≥](https://stackoverflow.com/questions/879/are-php-variables-passed-by-value-or-by-reference)

### Call by v√† pass by
- Khi n√≥i function call by , ng∆∞·ªùi ta ƒëang l·∫•y function l√†m tr·ªçng t√¢m c·ªßa c√¢u chuy·ªán.
- Khi n√≥i argument pass by, ng∆∞·ªùi ta ƒëang l·∫•y argument l√†m tr·ªçng t√¢m c·ªßa c√¢u chuy·ªán.

Ch·ªâ l√† hai c√°ch t·∫≠p trung kh√°c nhau v√†o m·ªôt vi·ªác: call function v·ªõi c√°c argument.

## Call function trong Python ho·∫°t ƒë·ªông th·∫ø n√†o?
N·∫øu b·∫Øt ph·∫£i ƒë∆∞a ra m·ªôt t·ª´ kho√°, th√¨ ƒë√≥ l√† c√°c argument s·∫Ω ƒë∆∞·ª£c "pass by assignment".
ƒê·ªÉ th·ª±c s·ª± hi·ªÉu Python assignment l√†m g√¨, b·∫°n c·∫ßn hi·ªÉu v·ªÅ [kh√°i ni·ªám **name** v√† **binding** trong Python](http://pymi.vn/tutorial/naming/).


### C√°ch ho·∫°t ƒë·ªông c·ªßa name v√† binding <a name="binding"></a>

```Python
x = 4
y = x
x = x + 1
print(x, y)
```

`x` l√† m·∫•y v√† `y` l√† m·∫•y?

Code n√†y ƒë·ªçc theo thu·∫≠t ng·ªØ c·ªßa Python nh∆∞ sau:
- bind name `x` v√†o object 4
- bind name `y` v√†o object m√† `x` HI·ªÜN T·∫†I ƒëang bind v√†o (t·ª©c 4)
- bind name `x` v√†o object t·∫°o ra b·ªüi x+1 (t·ª©c 5) do `x` l√† 4, khi +1, n√≥ sinh ra m·ªôt object m·ªõi l√† 5.

V·∫≠y r√µ r√†ng k·∫øt qu·∫£ ·ªü ƒë√¢y: `x` l√† 5, `y` l√† 4.
Ch√∫ √Ω r·∫±ng `y` kh√¥ng ƒëi theo `x`, c≈©ng kh√¥ng bind v√†o `x`, n√≥ bind v√†o object m√† `x` bind t·∫°i th·ªùi ƒëi·ªÉm ƒë√≥.

Xem v√≠ d·ª• sau t∆∞∆°ng t·ª±, nh∆∞ng kh√°c h·∫≥n:

```Python
L = [1,2,3]
K = L
L[0] = 9
print(L, K)
```

`L` l√† m·∫•y? v√† `K` l√† m·∫•y?

ƒê√¢y nh·∫Ω ra, ph·∫£i l√† [c√¢u h·ªèi ph·ªèng v·∫•n m·∫∑c ƒë·ªãnh cho l·∫≠p tr√¨nh vi√™n Python](https://stackoverflow.com/a/2573965/807703)
 ch·ª© kh√¥ng ph·∫£i m·∫•y c√¢u v·ªõ v·∫©n nh∆∞ ti√™u ƒë·ªÅ b√†i n√†y.
V√¨ sao? v√¨ n·∫øu l·∫≠p tr√¨nh vi√™n tr·∫£ l·ªùi ƒë√∫ng, t·ª©c l√† anh ta hi·ªÉu c√°ch Python ho·∫°t ƒë·ªông, v√† s·∫Ω kh√¥ng t·∫°o ra nh·ªØng bug r·∫•t c∆° b·∫£n
trong ch∆∞∆°ng tr√¨nh.

H√£y ƒë·ªçc ƒëo·∫°n code n√†y theo thu·∫≠t ng·ªØ Python:
- bind name `L` v√†o list object ch·ª©a 1,2,3
- bind name `K` v√†o object m√† `L` **hi·ªán t·∫°i** ƒëang bind v√†o (t·ª©c list 1,2,3)
- Thay ƒë·ªïi ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n c·ªßa list, g√°n cho gi√° tr·ªã b·∫±ng 9

H√£y nh·ªõ `L` v√† `K` ch·ªâ l√† 2 c√°i t√™n c√πng bind v√†o m·ªôt object, khi object n√†y b·ªã thay ƒë·ªïi, d√π d√πng qua t√™n `L` hay t√™n `K`, th√¨ thay ƒë·ªïi
ƒë√≥ l√† th·ª±c hi·ªán tr√™n object ƒë√≥. T·ª©c k·∫øt qu·∫£ s·∫Ω cho `L` v√† `K` gi·ªëng nhau (hay
ch√≠nh x√°c h∆°n, ch√∫ng l√† m·ªôt). D√πng function `id` s·∫Ω gi√∫p hi·ªÉu r√µ h∆°n khi n√≥i v·ªÅ
object v√† name:

```Python
>>> L = [1,2,3]
>>> K = L
>>> L[0] = 9
>>> print(L, K)
[9, 2, 3] [9, 2, 3]
>>> id(L)
4326049992
>>> id(K)
4326049992
>>> L is K
True
```

`id` s·∫Ω tr·∫£ v·ªÅ m·ªôt s·ªë ID (ƒë·∫£m b·∫£o l√† duy nh·∫•t) g·∫Øn li·ªÅn v·ªõi object m√† c√°i name
ƒë√≥ ƒëang bind.

### C∆° ch·∫ø ho·∫°t ƒë·ªông c·ªßa function <a name="function"></a>

```python
>>> def change(numb, ns):
...     numb = numb + 1
...     ns[0] = 0
...     return None
...
>>> N = 9
>>> L = [1,2,3]
>>> change(N, L)
>>> print(N, L)
9 [0, 2, 3]
```

C∆° ch·∫ø g·ªçi function c·ªßa Python ho·∫°t ƒë·ªông nh∆∞ sau:
- bind name `numb` v√†o argument th·ª© nh·∫•t, t·ª©c `numb = N`
- bind name `ns` v√†o argument th·ª© hai, t·ª©c `ns = L`
- bind `numb` v√†o object t·∫°o ra b·ªüi numb + 1, t·ª©c 10
- thay ƒë·ªïi object m√† name `ns` ƒëang bind t·ªõi, t·ª©c list [1,2,3], thay ƒë·ªïi gi√° tr·ªã ·ª©ng v·ªõi index 0, t·ª©c s·∫Ω c√≥ [0,2,3]
- n√™n nh·ªõ r·∫±ng `ns` v√† `L` c√πng bind ƒë·∫øn 1 object. V√¨ v·∫≠y gi·ªù L c≈©ng ƒë√£ b·ªã thay ƒë·ªïi

V·∫≠y l√†m sao ƒë·ªÉ kh√¥ng thay ƒë·ªïi list L v√† thu v·ªÅ m·ªôt list m·ªõi sau khi g·ªçi function?
H√£y t·∫°o m·ªôt b·∫£n copy c·ªßa list r·ªìi d√πng b·∫£n copy ƒë√≥.

```Python
>>> def change(L):
...     L = L[:] # slicing l√† m·ªôt c√°ch ƒë∆°n gi·∫£n ƒë·ªÉ t·∫°o m·ªôt b·∫£n shallow copy
...     L[0] = 0
...     return L
...
>>> newL = change(L)
>>> print(L)
[1, 2, 3]
>>> print(newL)
[0, 2, 3]
```

**CH√ö √ù**: N·∫øu list L ch·ª©a c√°c mutable object (xem ·ªü d∆∞·ªõi), c·∫ßn s·ª≠ d·ª•ng function `copy.deepcopy` trong standard library `copy`.

M·ªôt s·ªë ki·ªÉu d·ªØ li·ªáu trong Python kh√¥ng cho ph√©p thay ƒë·ªïi gi√° tr·ªã c·ªßa n√≥ sau khi t·∫°o ra (immutable) nh∆∞ int, float, str, NoneType, bool, tuple.
V√¨ v·∫≠y m·ªói l·∫ßn "thay ƒë·ªïi", ta s·∫Ω t·∫°o ra m·ªôt object m·ªõi ch·ª©a gi√° tr·ªã m·ªõi:

```Python
>>> N = 9
>>> id(N)
4297624192
>>> N = N + 2
>>> id(N)
4297624256
>>> N
11

>>> T1 = (1,2,3)
>>> id(T1)
4326100280
>>> T1 = T1 + (3,4,5)
>>> id(T1)
4325883048
>>> print(T1)
(1, 2, 3, 3, 4, 5)
```

C√°c ki·ªÉu d·ªØ li·ªáu kh√°c cho ph√©p thay ƒë·ªïi sau khi t·∫°o ra (mutable): list, dict, set.
```Python
>>> L = [1,2,3]
>>> id(L)
4326050504
>>> L.extend([3,4,5])
>>> id(L)
4326050504
>>> print(L)
[1, 2, 3, 3, 4, 5]
```

V·ªõi ki·ªÉu mutable, c·∫ßn ƒë·∫∑c bi·ªát ch√∫ √Ω ph√©p to√°n n√†o tr·∫£ v·ªÅ object m·ªõi, ph√©p to√°n n√†o thay ƒë·ªïi object hi·ªán t·∫°i:

```Python
>>> L = [1,2,3]
>>> id(L)
4326050568
>>> L = L + [3,4,5]
>>> id(L)
4326095240
>>> L
[1, 2, 3, 3, 4, 5]
```

`append`, `extend` c·ªßa list ƒë·ªÅu thay ƒë·ªïi object g·ªçi method. Ph√©p `+` list v·ªõi list, sinh ra m·ªôt list m·ªõi.

## Python d√πng pass by assignment, call by object reference

**Pass by assignment** l√† kh√°i ni·ªám l·∫•y t·ª´ [Python FAQ](https://docs.python.org/3/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference), khi m√† ng∆∞·ªùi ta b·∫Øt bu·ªôc ph·∫£i gi·∫£i th√≠ch kh√°i ni·ªám n√†y cho nh·ªØng ng∆∞·ªùi ƒë√£ bi·∫øt ng√¥n ng·ªØ l·∫≠p tr√¨nh kh√°c. C√°c name trong function s·∫Ω bind t·ªõi c√°c object m√† argument ƒëang bind t·ªõi.

Trong tutorial Python, c√≥ vi·∫øt ["c√°c argument ƒë∆∞·ª£c pass s·ª≠ d·ª•ng **call by value**, v·ªõi c√°c value lu√¥n lu√¥n l√† c√°c **object reference** ch·ª© kh√¥ng ph·∫£i value c·ªßa object."](https://docs.python.org/3/tutorial/controlflow.html#id1) - yup, I lied üòí

[ƒê·ªãnh nghƒ©a name trong Python](https://docs.python.org/3/reference/executionmodel.html#naming-and-binding):
> Names refer to objects.

Li·ªáu b·∫°n c√≥ th·ªÉ b·ªãa ra m·ªôt thu·∫≠t ng·ªØ n·ªØa l√† "call by name" ??!!!

## Ch·ªët, th√¥ng
ƒê·ªÉ kh·ªèi ƒëau ƒë·∫ßu v·ªÅ nh·ªØng ƒëi·ªÅu n√†y, ch·ªâ c·∫ßn n·∫Øm ch·∫Øc c√°c kh√°i ni·ªám `name`,
`binding`, `mutable`, `immutable` l√† ƒë·ªß bi·∫øt ch∆∞∆°ng tr√¨nh ch·∫°y th·∫ø n√†o.
B·∫°n kh√¥ng c·∫ßn bi·∫øt g·ªçi t√™n Python l√† call-by-g√¨? N·∫øu c·∫ßn th·ªÉ hi·ªán th√¨ h√£y n√≥i
"call-by-object-reference" v√† g·ª≠i k√®m link doc.

Tr√™n internet c√≥ nhi·ªÅu n∆°i h·ªèi ƒë√°p, c·ªë ƒë∆∞a ra m·ªôt c√°i t√™n, nh∆∞ng nh·ªØng c√°i t√™n
ƒë√≥ kh√¥ng c√≥ trong t√†i li·ªáu ch√≠nh th·ªëng c·ªßa Python.

## Tham kh·∫£o
- http://www.effbot.org/zone/call-by-object.htm
- https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/
- https://stackoverflow.com/questions/534375/passing-values-in-python
- https://docs.python.org/3/library/copy.html
- http://pymi.vn/blog/augassign/
---
pub_date: 2017-05-31
---
shortintro:

call by reference hay call by value? v√† n·∫øu b·∫°n kh√¥ng hi·ªÉu ti√™u ƒë·ªÅ n√†y vi·∫øt g√¨, th√¨ n√≥ gi·∫£i th√≠ch c∆° ch·∫ø ho·∫°t ƒë·ªông khi g·ªçi m·ªôt function
