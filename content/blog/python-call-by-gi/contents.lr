title: Python call by gÃ¬?
---
_slug: call-by
---
author: HVN
---
body:

Má»™t cÃ¢u há»i nháº¡t toáº¹t cá»§a nhÃ  phá»ng váº¥n cÃ³ thá»ƒ Ä‘Æ°a ra (vá»›i ngÆ°á»i phá»ng váº¥n thÆ°á»ng cÃ³ kiáº¿n
thá»©c tá»« ngÃ´n ngá»¯ khÃ¡c nhÆ° Java, PHP hay C++, hoáº·c má»™t chuyÃªn gia Python thá»±c sá»± vÃ  há»i Ä‘á»ƒ
check xem báº¡n cÃ³ máº¯c báº«y khÃ´ng - loáº¡i nÃ y thÃ¬ hiáº¿m, vÃ  khÃ´ng ráº£nh ğŸ™„).

## Python dÃ¹ng call-by-value hay call-by-reference?
Hai khÃ¡i niá»‡m nÃ y thá»±c ra khÃ´ng tá»“n táº¡i trong Python, báº¡n cÃ³ thá»ƒ Ä‘Ã o tung cáº£ trang document cá»§a Python cÅ©ng
sáº½ khÃ´ng tháº¥y nÃ³i gÃ¬ vá» khÃ¡i niá»‡m nÃ y. Tá»©c lÃ : nÃ³ khÃ´ng cÃ³ tháº­t! NÃ³ khÃ´ng cáº§n thiáº¿t! báº¡n chá»‰ cáº§n hiá»ƒu function
 hoáº¡t Ä‘á»™ng tháº¿ nÃ o, cÃ¡ch Python sá»­ dá»¥ng "name binding". CÃ²n khÃ´ng nÃªn ngá»“i cÃ£i nhau vá» "call-by-reference",
"call-by-value" lÃ m gÃ¬ cho tá»‘n thá»i gian, vÃ´ tÃ¡c dá»¥ng.

- https://docs.python.org/3/search.html?q=by+reference
- https://docs.python.org/3/search.html?q=by+value

## Call by XYZ lÃ  cÃ¡i gÃ¬?
Má»i khÃ¡i niá»‡m viáº¿t sau Ä‘Ã¢y khÃ´ng tá»“n táº¡i trong Python, cÃ¡c thuáº­t ngá»¯ Ä‘Æ°á»£c viáº¿t vá»›i "tá»« vá»±ng" cá»§a ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c.

Trong má»™t sá»‘ ngÃ´n ngá»¯ nhÆ° C, C++, khi gá»i function ta cÃ³ truyá»n vÃ o cÃ¡c "tham sá»‘" (pass argument),
náº¿u function Ä‘Ã³ nháº­n vÃ o má»™t array (trong Python hiá»ƒu nÃ´m na lÃ  list), thÃ¬ trong function,
ta sáº½ xá»­ lÃ½ chÃ­nh array Ä‘Ã³ hay má»™t báº£n copy cá»§a nÃ³?

Kiá»ƒu 1
```C
update(danh_sach)
```

Kiá»ƒu 2
```C
update(&danh_sach)
```

Vá»›i cÃ¢u gá»i function (call function) thá»© nháº¥t ta gá»i function vá»›i giÃ¡ trá»‹ (value) cá»§a biáº¿n `danh_sach`.
Má»i thay Ä‘á»•i trong function thá»±c hiá»‡n trÃªn argument Ä‘Æ°á»£c gá»i lÃ  thá»±c hiá»‡n trÃªn báº£n copy cá»§a `danh_sach`.

CÃ¢u gá»i function thá»© hai ta gá»i function vá»›i con trá» (pointer) Ä‘áº¿n biáº¿n `danh_sach` hay cÃ²n gá»i lÃ  reference. Má»i thay
Ä‘á»•i sáº½ thay Ä‘á»•i trá»±c tiáº¿p trÃªn `danh_sach`.

Nhá»¯ng ngÃ´n ngá»¯ láº­p trÃ¬nh bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi C thÆ°á»ng cáº¯t giáº£m khÃ¡i niá»‡m "pointer" Ä‘á»ƒ trÃ¡nh gÃ¢y phá»©c táº¡p, vÃ¬ váº­y
khi gá»i function sáº½ máº·c Ä‘á»‹nh dÃ¹ng 1 trong 2 kiá»ƒu trÃªn. Hoáº·c dÃ¹ng má»™t cÆ¡ cháº¿ khÃ¡c hoÃ n toÃ n.

VÃ­ dá»¥:
- [Java call/pass by value](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)
- [PHP call/pass by gÃ¬ Ä‘Ã³](https://stackoverflow.com/questions/879/are-php-variables-passed-by-value-or-by-reference)

### Call by vÃ  pass by
- Khi nÃ³i function call by , ngÆ°á»i ta Ä‘ang láº¥y function lÃ m trá»ng tÃ¢m cá»§a cÃ¢u chuyá»‡n.
- Khi nÃ³i argument pass by, ngÆ°á»i ta Ä‘ang láº¥y argument lÃ m trá»ng tÃ¢m cá»§a cÃ¢u chuyá»‡n.

Chá»‰ lÃ  hai cÃ¡ch táº­p trung khÃ¡c nhau vÃ o má»™t viá»‡c: call function vá»›i cÃ¡c argument.

## Call function trong Python hoáº¡t Ä‘á»™ng tháº¿ nÃ o?
Náº¿u báº¯t pháº£i Ä‘Æ°a ra má»™t tá»« khoÃ¡, thÃ¬ Ä‘Ã³ lÃ  cÃ¡c argument sáº½ Ä‘Æ°á»£c "pass by assignment".
Äá»ƒ thá»±c sá»± hiá»ƒu Python assignment lÃ m gÃ¬, báº¡n cáº§n hiá»ƒu vá» [khÃ¡i niá»‡m **name** vÃ  **binding** trong Python](http://pymi.vn/tutorial/naming/).

```Python
x = 4
y = x
x = x + 1
print(x, y)
```

`x` lÃ  máº¥y vÃ  `y` lÃ  máº¥y?

Code nÃ y Ä‘á»c theo thuáº­t ngá»¯ cá»§a Python nhÆ° sau:
- bind name `x` vÃ o object 4
- bind name `y` vÃ o object mÃ  `x` HIá»†N Táº I Ä‘ang bind vÃ o (tá»©c 4)
- bind name `x` vÃ o object táº¡o ra bá»Ÿi x+1 (tá»©c 5) do `x` lÃ  4, khi +1, nÃ³ sinh ra má»™t object má»›i lÃ  5.

Váº­y rÃµ rÃ ng káº¿t quáº£ á»Ÿ Ä‘Ã¢y: `x` lÃ  5, `y` lÃ  4.
ChÃº Ã½ ráº±ng `y` khÃ´ng Ä‘i theo `x`, cÅ©ng khÃ´ng bind vÃ o `x`, nÃ³ bind vÃ o object mÃ  `x` bind táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³.

Xem vÃ­ dá»¥ sau tÆ°Æ¡ng tá»±, nhÆ°ng khÃ¡c háº³n:

```Python
L = [1,2,3]
K = L
L[0] = 9
print(L, K)
```

`L` lÃ  máº¥y? vÃ  `K` lÃ  máº¥y?

ÄÃ¢y nháº½ ra, pháº£i lÃ  [cÃ¢u há»i phá»ng váº¥n máº·c Ä‘á»‹nh cho láº­p trÃ¬nh viÃªn Python](https://stackoverflow.com/a/2573965/807703)
 chá»© khÃ´ng pháº£i máº¥y cÃ¢u vá»› váº©n nhÆ° tiÃªu Ä‘á» bÃ i nÃ y.
VÃ¬ sao? vÃ¬ náº¿u láº­p trÃ¬nh viÃªn tráº£ lá»i Ä‘Ãºng, tá»©c lÃ  anh ta hiá»ƒu cÃ¡ch Python hoáº¡t Ä‘á»™ng, vÃ  sáº½ khÃ´ng táº¡o ra nhá»¯ng bug ráº¥t cÆ¡ báº£n
trong chÆ°Æ¡ng trÃ¬nh.

HÃ£y Ä‘á»c Ä‘oáº¡n code nÃ y theo thuáº­t ngá»¯ Python:
- bind name `L` vÃ o list object chá»©a 1,2,3
- bind name `K` vÃ o object mÃ  `L` **hiá»‡n táº¡i** Ä‘ang bind vÃ o (tá»©c list 1,2,3)
- Thay Ä‘á»•i pháº§n tá»­ Ä‘áº§u tiÃªn cá»§a list, gÃ¡n cho giÃ¡ trá»‹ báº±ng 9

HÃ£y nhá»› `L` vÃ  `K` chá»‰ lÃ  2 cÃ¡i tÃªn cÃ¹ng bind vÃ o má»™t object, khi object nÃ y bá»‹ thay Ä‘á»•i, dÃ¹ dÃ¹ng qua tÃªn `L` hay tÃªn `K`, thÃ¬ thay Ä‘á»•i
Ä‘Ã³ lÃ  thá»±c hiá»‡n trÃªn object Ä‘Ã³. Tá»©c káº¿t quáº£ sáº½ cho `L` vÃ  `K` giá»‘ng nhau (hay
chÃ­nh xÃ¡c hÆ¡n, chÃºng lÃ  má»™t). DÃ¹ng function `id` sáº½ giÃºp hiá»ƒu rÃµ hÆ¡n khi nÃ³i vá»
object vÃ  name:

```Python
>>> L = [1,2,3]
>>> K = L
>>> L[0] = 9
>>> print(L, K)
[9, 2, 3] [9, 2, 3]
>>> id(L)
4326049992
>>> id(K)
4326049992
>>> L is K
True
```

`id` sáº½ tráº£ vá» má»™t sá»‘ ID (Ä‘áº£m báº£o lÃ  duy nháº¥t) gáº¯n liá»n vá»›i object mÃ  cÃ¡i name
Ä‘Ã³ Ä‘ang bind.

Giá» hÃ£y gá»i function:

```Python
def change(numb, ns):
    numb = numb + 1
    ns[0] = 0
    return None

N = 9
L = [1,2,3]
change(N, L)
print(N, L)
```

CÆ¡ cháº¿ gá»i function cá»§a Python hoáº¡t Ä‘á»™ng nhÆ° sau:
- bind name `numb` vÃ o argument thá»© nháº¥t, tá»©c `numb = N`
- bind name `ns` vÃ o argument thá»© hai, tá»©c `ns = L`
- bind `numb` vÃ o object táº¡o ra bá»Ÿi numb + 1, tá»©c 10
- thay Ä‘á»•i object mÃ  name `ns` Ä‘ang bind tá»›i, tá»©c list [1,2,3], thay Ä‘á»•i giÃ¡ trá»‹ á»©ng vá»›i index 0, tá»©c sáº½ cÃ³ [0,2,3]
- nÃªn nhá»› ráº±ng `ns` vÃ  `L` cÃ¹ng bind Ä‘áº¿n 1 object. VÃ¬ váº­y giá» L cÅ©ng Ä‘Ã£ bá»‹ thay Ä‘á»•i

```
>>> def change(numb, ns):
...     numb = numb + 1
...     ns[0] = 0
...     return None
...
>>> N = 9
>>> L = [1,2,3]
>>> change(N, L)
>>> print(N, L)
9 [0, 2, 3]
```

Váº­y lÃ m sao Ä‘á»ƒ khÃ´ng thay Ä‘á»•i list L vÃ  thu vá» má»™t list má»›i sau khi gá»i function?
HÃ£y táº¡o má»™t báº£n copy cá»§a list rá»“i dÃ¹ng báº£n copy Ä‘Ã³.

```Python
>>> def change(L):
...     L = L[:]
...     L[0] = 0
...     return L
...
>>> newL = change(L)
>>> print(L)
[1, 2, 3]
>>> print(newL)
[0, 2, 3]
```

**CHÃš Ã**: Náº¿u list L chá»©a cÃ¡c mutable object (xem á»Ÿ dÆ°á»›i), cáº§n sá»­ dá»¥ng function `copy.deepcopy` trong standard library `copy`.

Má»™t sá»‘ kiá»ƒu dá»¯ liá»‡u trong Python khÃ´ng cho phÃ©p thay Ä‘á»•i giÃ¡ trá»‹ cá»§a nÃ³ sau khi táº¡o ra (immutable) nhÆ° int, float, str, NoneType, bool, tuple.
VÃ¬ váº­y má»—i láº§n "thay Ä‘á»•i", ta sáº½ táº¡o ra má»™t object má»›i chá»©a giÃ¡ trá»‹ má»›i:

```Python
>>> N = 9
>>> id(N)
4297624192
>>> N = N + 2
>>> id(N)
4297624256
>>> N
11

>>> T1 = (1,2,3)
>>> id(T1)
4326100280
>>> T1 = T1 + (3,4,5)
>>> id(T1)
4325883048
>>> print(T1)
(1, 2, 3, 3, 4, 5)
```

CÃ¡c kiá»ƒu dá»¯ liá»‡u khÃ¡c cho phÃ©p thay Ä‘á»•i sau khi táº¡o ra (mutable): list, dict, set.
```Python
>>> L = [1,2,3]
>>> id(L)
4326050504
>>> L.extend([3,4,5])
>>> id(L)
4326050504
>>> print(L)
[1, 2, 3, 3, 4, 5]
```

Vá»›i kiá»ƒu mutable, cáº§n Ä‘áº·c biá»‡t chÃº Ã½ phÃ©p toÃ¡n nÃ o tráº£ vá» object má»›i, phÃ©p toÃ¡n nÃ o thay Ä‘á»•i object hiá»‡n táº¡i:

```Python
>>> L = [1,2,3]
>>> id(L)
4326050568
>>> L = L + [3,4,5]
>>> id(L)
4326095240
>>> L
[1, 2, 3, 3, 4, 5]
```

`append`, `extend` cá»§a list Ä‘á»u thay Ä‘á»•i object gá»i method. PhÃ©p `+` list vá»›i list, sinh ra má»™t list má»›i.

## Python dÃ¹ng pass by assignment, call by object reference

**Pass by assignment** lÃ  khÃ¡i niá»‡m láº¥y tá»« [Python FAQ](https://docs.python.org/3/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference), khi mÃ  ngÆ°á»i ta báº¯t buá»™c pháº£i giáº£i thÃ­ch khÃ¡i niá»‡m nÃ y cho nhá»¯ng ngÆ°á»i Ä‘Ã£ biáº¿t ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c. CÃ¡c name trong function sáº½ bind tá»›i cÃ¡c object mÃ  argument Ä‘ang bind tá»›i.

Trong tutorial Python, cÃ³ viáº¿t ["cÃ¡c argument Ä‘Æ°á»£c pass sá»­ dá»¥ng **call by value**, vá»›i cÃ¡c value luÃ´n luÃ´n lÃ  cÃ¡c **object reference** chá»© khÃ´ng pháº£i value cá»§a object."](https://docs.python.org/3/tutorial/controlflow.html#id1) - yup, I lied ğŸ˜’

[Äá»‹nh nghÄ©a name trong Python](https://docs.python.org/3/reference/executionmodel.html#naming-and-binding):
> Names refer to objects.

Liá»‡u báº¡n cÃ³ thá»ƒ bá»‹a ra má»™t thuáº­t ngá»¯ ná»¯a lÃ  "call by name" ??!!!
Bá»Ÿi váº­y Ä‘á»ƒ khá»i Ä‘au Ä‘áº§u vá» nhá»¯ng Ä‘iá»u nÃ y, chá»‰ cáº§n náº¯m cháº¯c cÃ¡c khÃ¡i niá»‡m `name`, `binding`, `mutable`, `immutable` lÃ  Ä‘á»§ biáº¿t chÆ°Æ¡ng trÃ¬nh cháº¡y tháº¿ nÃ o.

TrÃªn internet cÃ³ nhiá»u nÆ¡i há»i Ä‘Ã¡p, cá»‘ Ä‘Æ°a ra má»™t cÃ¡i tÃªn, nhÆ°ng nhá»¯ng cÃ¡i tÃªn
Ä‘Ã³ khÃ´ng cÃ³ trong tÃ i liá»‡u chÃ­nh thá»‘ng cá»§a Python. TÃ i liá»‡u áº¥y (Python
        document) viáº¿t "call by object reference" nhá»¯ng cÅ©ng chá»‰ lÃ  má»™t chÃº Ã½
nhá» cuá»‘i pháº§n tutorial.

## Tham kháº£o
- http://www.effbot.org/zone/call-by-object.htm
- https://jeffknupp.com/blog/2012/11/13/is-python-callbyvalue-or-callbyreference-neither/
- https://stackoverflow.com/questions/534375/passing-values-in-python
- https://docs.python.org/3/library/copy.html
- http://pymi.vn/blog/augassign/
---
pub_date: 2017-05-31
---
shortintro:

call by reference hay call by value? vÃ  náº¿u báº¡n khÃ´ng hiá»ƒu tiÃªu Ä‘á» nÃ y viáº¿t gÃ¬, thÃ¬ nÃ³ giáº£i thÃ­ch cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng khi gá»i má»™t function
